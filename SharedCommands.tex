\documentclass[a5paper,pagesize,10pt,bibtotoc,normalheadings,DIV=9,twoside,openany]{scrbook}
\usepackage[utf8]{inputenc}
\usepackage{tocloft}
\usepackage{mathtools}
\usepackage{amsfonts}
\usepackage{enumitem}
\usepackage{hyperref}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage[hmargin=2cm, vmargin=2.5cm]{geometry}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{parskip}
\usepackage{framed}
\usepackage{fancyhdr}

\usepackage[
    backend=bibtex,
    style=alphabetic,
    sorting=ynt
]{biblatex}

%=========== Path to images ==============
\graphicspath{{./images/}}

%============== Resources ================
\addbibresource{../AbstractAlgebra.bib}

%============ Redefinitions ==============
\let\oldemptyset\emptyset
\let\emptyset\varnothing

\let\totient\varphi

\renewcommand{\vert}{ \ | \ }

%======== Theorem-Like Things ============
\newtheoremstyle{exercise-style}
  {-5pt}  % Measure of space to leave above the theorem
  {\topsep}  % Measure of space to leave below the theorem
  {}  % Name of the font to use in the body of the theorem
  {0pt}  % Measure of space to indent
  {\bfseries}  % Name of the head font
  {.}  % Punctuation between head and body
  { }  % Space after theorem head; " " = normal inter-word space
  {\thmname{#1}\thmnumber{ #2}\textnormal{\thmnote{ (#3)}}}

\newtheorem{theorem}{Theorem}[section]
\renewcommand{\thetheorem}{\Roman{part}.\arabic{chapter}.\arabic{section}.\arabic{theorem}}

\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{lemma-thrm}{Lemma}[theorem]
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{corollary-thrm}{Corollary}[theorem]
\theoremstyle{definition}\newtheorem*{remark}{Remark}
\theoremstyle{definition}\newtheorem{example}[theorem]{Example}

\theoremstyle{exercise-style}\newtheorem{exercisehidden}{Exercise}[chapter]
\renewcommand{\theexercisehidden}{\Roman{part}.\arabic{chapter}.\arabic{exercisehidden}}

\theoremstyle{definition}\newtheorem{problem}{Problem}[chapter]
\renewcommand{\theproblem}{\Roman{part}.\arabic{chapter}.\arabic{problem}}

%============ Environments ===============
\newenvironment{exercise}
{\begin{framed}\noindent\begin{exercisehidden}}
{\end{exercisehidden}\end{framed}}

%=========== Custom Commands =============
\newcommand{\code}[1]{\texttt{#1}}  % Code block
\newcommand{\unchapter}[1]{\addcontentsline{toc}{chapter}{#1}\chapter*{#1}
\markboth{#1}{}}  % Unnumbered chapter
\newcommand{\unsection}[1]{\addcontentsline{toc}{section}{#1}\section*{#1}}  % Unnumbered section
\makeatletter\newcommand*{\rom}[1]{\expandafter\@slowromancap\romannumeral #1@}\makeatother

\newcommand{\lcm}{\mathrm{lcm}}  % Lowest common multiple function
\newcommand{\sgn}{\mathrm{sgn}}  % Signum function

\newcommand{\im}{\mathrm{im}\;}  % Image of a function
\newcommand{\id}{\mathrm{id}}    % Identity function

\newcommand{\An}[1]{\mathrm{A}_{#1}}                    % Alternating group of degree n
\newcommand{\Aut}[1]{\mathrm{Aut}(#1)}                  % Group of automorphisms of G
\newcommand{\C}[2]{\mathrm{C}_{#1}(#2)}                 % Centralizer of an element in G
\newcommand{\Cl}[1]{\mathrm{Cl}(#1)}                    % Conjugacy class of the element x
\newcommand{\Cn}[1]{\mathrm{C}_{#1}}                    % Cyclic group of order n
\newcommand{\GL}[2]{\mathrm{GL}_{#1}\left(#2\right)}    % General Linear Group of degree n
\newcommand{\Inn}[1]{\mathrm{Inn}(#1)}                  % Group of inner automorphisms of G
\newcommand{\N}[2]{\mathrm{N}_{#1}(#2)}                 % Normalizer of S in G
\newcommand{\Out}[1]{\mathrm{Out}(#1)}                  % Group of outer automorphisms of G
\newcommand{\SL}[2]{\mathrm{SL}_{#1}\left(#2\right)}    % Special Linear Group of degree n
\newcommand{\Sn}[1]{\mathrm{S}_{#1}}                    % Symmetric group of degree n
\newcommand{\Syl}[2]{\mathrm{Syl}_{#1}(#2)}             % Set of Sylow p-groups of G
\newcommand{\Sym}[1]{\mathrm{Sym}(#1)}                  % Symmetric group of a set
\newcommand{\Un}[1]{\mathcal{U}_{#1}}                   % Group of units modulo n
\newcommand{\Z}[1]{\mathrm{Z}(#1)}                      % Center of a group G

\newcommand{\Stab}[2]{\mathrm{Stab}_{#1}(#2)}  % Stabilzer of x by G
\newcommand{\Fix}[2]{\mathrm{Fix}_{#1}(#2)}    % Set of all elements in X which is fixed by g
\newcommand{\Orb}[2]{\mathrm{Orb}_{#1}(#2)}    % Orbit of x under G

%============ Custom Header ==============
\fancypagestyle{plain}{\fancyhf{}\renewcommand{\headrulewidth}{0pt}} % To clear page numbers from footer, and header line at the start of every chapter

\pagestyle{fancy}
\fancyhf{}% Clear header/footer

\fancyhead[LE,RO]{\thepage}
\fancyhead[LO,RE]{\textit{\nouppercase\leftmark}}

%============= Cover Pages ===============
\def\coverpages{
  % Title page
  \begin{titlepage}
    \centering{
        {
            \selectfont
            \Huge
            \textbf{Abstract Algebra}\\
            \vspace{-0.2cm}
            \Large
            \textbf{A Gentle Introduction}\\
            \vspace{0.5cm}
            \LARGE
            \volumetitle
        }
    }\\
    \vspace{2cm}
    \centering{\Large{Overwrite}}\\
    \vspace{\fill}
    \centering \small{\textit{Version \version}}
  \end{titlepage}

  \newpage{}
  
  % Edition notice
  \clearpage\null\vfill
  \pagestyle{empty}
  \begin{minipage}[b]{0.9\textwidth}
    \footnotesize\raggedright
    \setlength{\parskip}{0.5\baselineskip}

    Published by Kan Onn Kit\\
    Singapore
    \vspace{7cm}

    \textbf{Abstract Algebra: A Gentle Introduction -- \volumetitle}\par
    Version \version
    \vspace{0.35cm}

    Copyright \copyright \ 2022 -- \the\year\ by Kan Onn Kit\par
    This work is licensed under the Creative Commons Attribution 4.0 International Licence.\par
    \includegraphics[width=2.5cm]{../CC BY 4.0.png}\\  % With reference to the volumes' folders
    Source files available \href{https://github.com/PhotonicGluon/Abstract-Algebra-Book}{here}.
    \vspace{0.35cm}

    Typeset in 10pt Computer Modern Roman using PDF\LaTeX.

  \end{minipage}
  
  \vspace*{2\baselineskip}
  \cleardoublepage
  \rfoot{\thepage}
}
