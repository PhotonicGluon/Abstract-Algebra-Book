\chapter{Domains and Factorization}
Earlier, we introduced domains, before focusing our attention mainly on integral domains. We then explored concepts of factorization, but restricted the discussion to polynomial rings. We explore more types of domains here, and explore the factorization available in such domains.

\section{Factorization in Domains}
Before we define some constructs present in integral domains, we first look at what is means for an element to be a factor/divisor of another element in that domain.

\begin{definition}
    Let $D$ be an integral domain and $a,b \in D$. Then \textbf{$a$ divides $b$}\index{divides!for integral domains} (or that $a$ is a \textbf{factor}\index{factor!for integral domains} of $b$) if there is an element $k \in D$ such that $ak = b$. This is denoted $a \vert b$.
\end{definition}
\begin{example}
    One sees that 2 divides 6 in $\Z$ since $2 \times 3 = 6$. Similarly 3 divides 6 since $3 \times 2 = 6$.
\end{example}
\begin{example}
    In $\Z_7$, we see that 3 divides 5 since $3 \times 4 = 12 = 5$. We also see that 5 divides 3 since $5 \times 2 = 10 = 3$.
\end{example}

\begin{definition}
    Let $D$ be an integral domain, and $a,b \in D$. Then $a$ and $b$ are said to be \textbf{associates}\index{associates} if and only if there exists a unit $u \in D$ such that $a = ub$.
\end{definition}

\begin{example}
    In $\Z$, 2 and -2 are associates since $-2 = (-1)(2)$ and -1 is a unit in $\Z$.
\end{example}

\begin{example}
    In $\Z_7$, 3 and 5 are associates since $5 = 12 = (4)(3)$. In fact, any two non-zero elements in $\Z_7$ are associates of each other, since every non-zero element of $\Z_7$ is a unit.
\end{example}

\begin{example}
    In $\Q$, any two non-zero elements are associates of each other, since every non-zero element in $\Q$ is a unit. As an example, $\frac{12}{35}$ and $\frac{71}{25}$ are associates since $\frac{71}{25} = \left(\frac{35}{12} \times \frac{71}{25}\right)\left(\frac{12}{35}\right)$.
\end{example}

From the previous two examples, we can come up with the following proposition.

\begin{proposition}
    Any two non-zero elements in a field $F$ are associates.
\end{proposition}
\begin{proof}
    Let $a, b \in F$ be non-zero elements. Note $a^{-1}$ exists since $F$ is a field, and $a^{-1}b$ is an element of the field by closure. Since a field is a division ring (by definition), $a^{-1}b$ has an inverse, so it is a unit. Therefore one sees $b = (a^{-1}b)a$ which means $a$ and $b$ are associates.
\end{proof}

Thus, in a sense, it is only meaningful to talk about associates when we restrict or view to that of integral domains that are \textit{not} fields.

\begin{exercise}
    Let $D$ be an integral domain and $a,b \in D$. Prove that $a \vert b$ and $b \vert a$ if and only if $a$ and $b$ are associates.
\end{exercise}

We now look at irreducibles and primes.
\begin{definition}
    Let $D$ be an integral domain and $x \in D$. Then $x$ is an \textbf{irreducible}\index{irreducible!element} if and only if, when $x$ is written as $x = pq$ where $p, q \in D$, then either $p$ is a unit or $q$ is a unit.
\end{definition}
\begin{definition}
    Let $D$ be an integral domain and $p \in D$. Then $p$ is a \textbf{prime}\index{prime} if $p$ is not a unit and, for all $a, b \in D$, we have $p \vert ab$ implies $p \vert a$ or $p \vert b$.
\end{definition}

We note that the above definition of irreducibles is similar to that of irreducible polynomials, and the definition of primes is similarly defined to that of prime ideals.

The principal confusion one may have with the definition of a prime above is that, in the integers, we defined prime numbers to satisfy the definition of an irreducible (\myref{definition-prime-number}), and that primes also satisfy the primality definition above (\myref{corollary-euclid}). The reason for this confusion is that, over the integers, irreducibles are primes. However, in general, they are \textit{not} the same. We will look at such examples in a while.

To explore the differences between irreducibles and primes, we look at quadratic integers, with a more detailed exploration done in the next chapter.
\begin{definition}
    A \textbf{square-free integer}\index{square-free integer} is an integer that is not divisible by any square number other than 1.
\end{definition}

Let $d$ be a square-free integer not equal to 1. We note that the set 
\[
    \Z[\sqrt{d}] = \left\{a + b\sqrt{d} \vert a,b \in \Z\right\}
\]
forms an integral domain. We will leave proving that this is indeed an integral domain to the next section. We also define the norm, the map $N: \Z[\sqrt{d}] \to \Z$ where
\[
    N(a+b\sqrt{d}) = |a^2 - db^2|.
\]
For now, we note that $N(xy) = N(x)N(y)$ for all $x, y \in \Z[\sqrt{d}]$. We will prove this and other properties of the norm later.

\begin{example}
    We show that it is possible for an irreducible in $D = \Z[\sqrt{-3}]$ to not be prime. Note that $N(a+b\sqrt{-3}) = a^2 + 3b^2$. Let $r = 1 + \sqrt{-3}$.
    \begin{itemize}
        \item We claim that $r$ is irreducible. Seeking a contradiction, suppose $r = xy$ where neither $x$ nor $y$ is a unit. Then $N(r) = N(x)N(y) = N(1+\sqrt{-3}) = 4$. It follows that, since $x$ and $y$ are not units, that $N(x) = N(y) = 2$. But, there are no integers $a$ and $b$ such that $a^2 + 3b^2 = 2$ required for $x$ (and $y$), a contradiction. Therefore $x$ or $y$ is a unit, meaning that $r$ is irreducible.

        \item We claim that $r$ is \textit{not} a prime. Observe that
        \[
            (1+\sqrt{-3})(1-\sqrt{-3}) = 1-(-3) = 4 = 2 \times 2
        \]
        so $1 + \sqrt{-3}$ divides $2 \times 2$. However, for integers $a$ and $b$ to exist so that $2 = (1+\sqrt{-3})(a+b\sqrt{-3}) = (a-3b) + (a+b)\sqrt{-3}$, we must have $a - 3b = 2$ and $a + b = 0$, which has a solution $a = \frac12$ and $b = -\frac12$ which is not an integer. Therefore $r$ is not prime.
    \end{itemize}
    Hence it is possible for an irreducible to not be a prime.
\end{example}

We note one property of irreducibles.
\begin{proposition}\label{prop-associates-of-irreducible-is-irreducible}
    In an integral domain, associates of an irreducible are irreducible.
\end{proposition}
\begin{proof}
    See \myref{exercise-associates-of-irreducible-is-irreducible} (later).
\end{proof}

One might wonder whether it is possible for a prime to not be an irreducible. It turns out that it is not possible.
\begin{theorem}\label{thrm-in-integral-domain-primes-are-irreducibles}
    In an integral domain $D$, all primes are irreducibles.
\end{theorem}
\begin{proof}
    Suppose $p \in D$ is a prime. Suppose $p = xy$ where $x, y\in D$. Then clearly $p = (1)(xy)$ and so $p \vert xy$, meaning $p \vert x$ or $p \vert y$. Without loss of generality, assume $p \vert x$, meaning $x = kp$ for some $k \in D$. Then one sees
    \begin{align*}
        1x &= x\\
        &= kp\\
        &= k(xy)\\
        &= (ky)x & (\text{Integral domain is commutative})
    \end{align*}
    which means $ky = 1$ by cancellation law (\myref{prop-domain-cancellation-law}). Hence $y$ is a unit; $p$ is an irreducible.
\end{proof}

If we are working in a principal ideal domain then we have a stronger result.
\begin{theorem}\label{thrm-in-PID-prime-iff-irreducible}
    Let $D$ be a PID. Then an element is a prime if and only if it is an irreducible.
\end{theorem}
\begin{proof}
    The forward direction is proven by \myref{thrm-in-integral-domain-primes-are-irreducibles}, so we only work in the reverse direction: proving that an element is prime if it is irreducible in $D$.

    Suppose $r$ is an irreducible in $D$ and suppose $r \vert xy$ where $x, y \in D$. Consider the set
    \[
        I = \{\lambda r + \mu x \vert \lambda, \mu \in D\}.
    \]
    We know that $I$ is an ideal since it is the sum of principal ideals $\princ{r}$ and $\princ{x}$ (\myref{prop-sum-of-ideals-is-ideal}). Since $D$ is a PID let $I = \princ{d}$ for some $d \in D$. As $r \in I$, write $r = kd$ for some $k \in D$. Note that because $r$ is irreducible we know that either $k$ is a unit or $d$ is a unit.
    \begin{itemize}
        \item If $k$ is a unit, then $\princ{r} = \princ{kd} = \princ{d} = I$ (\myref{prop-principal-ideals-equal-iff-associates}). Since $x \in I$, there is a $t \in D$ such that $x = rt$, meaning $r \vert x$.
        \item Otherwise, if $d$ is a unit, then $I$ contains a unit and so $I = D$ (\myref{prop-ideal-contains-unit-iff-ideal-is-whole-ring}), meaning $1 \in I$. Write $1 = \lambda r + \mu x$, so $y = \lambda ry + \mu xy$. Since $r \vert \lambda ry$ and $r \vert xy$ (by assumption), thus $r \vert (\lambda ry + \mu xy)$, meaning $r \vert y$.
    \end{itemize}
    Therefore, if $r \vert xy$ then either $r \vert x$ or $r \vert y$, meaning $r$ is prime.
\end{proof}
\begin{exercise}\label{exercise-associates-of-irreducible-is-irreducible}
    Prove \myref{prop-associates-of-irreducible-is-irreducible}.
\end{exercise}

\section{Quadratic Field and Quadratic Integers}
We alluded to quadratic integers in the previous section; we make it formal what they are here.

\begin{definition}
    Let $d$ be a square-free integer not equal to 1. The \textbf{quadratic field}\index{quadratic field} of $d$ is
    \[
        \Q[\sqrt{d}] = \{a + b\sqrt{d} \vert a,b\in\Q\}.
    \]
\end{definition}
\begin{proposition}
    The quadratic field $\Q[\sqrt{d}]$, where $d$ is a square-free integer not equal to 1, is indeed a field.
\end{proposition}
\begin{proof}
    We note that the arithmetic was not specified explicitly; this is because we are adapting the definitions of polynomial addition and multiplication to our current context. In particular,
    \[
        (a+b\sqrt{d}) + (x + y\sqrt{d}) = (a+x) + (b+y)\sqrt{d}
    \]
    and
    \[
        (a+b\sqrt{d})(x+y\sqrt{d}) = (ax+(by)d) + (ay + bx)\sqrt{d}.
    \]

    Note we do not need to prove that $(\Q[\sqrt{d}], +)$ is an abelian group as this is inherited from our adaptation of the polynomial ring $\Q[x]$, substituting $x$ with $\sqrt{d}$. We, however, need to prove that multiplication has identity and inverses, since the rest is also inherited from polynomial multiplication.

    \begin{itemize}
        \item \textbf{Identity}: The multiplicative identity is $1 = 1 + 0\sqrt{d}$, since one sees clearly that
        \[
            (a+b\sqrt{d})(1+0\sqrt{d}) = ((a\times1) + (b\times0)d) + ((a\times0) + (b \times 1))\sqrt{d} = a + b\sqrt{d}
        \]

        \item \textbf{Inverses}: We first note that since $d$ is square-free, therefore $\sqrt{d}$ is not an integer. Thus $a^2 - db^2$ is non-zero. We note that for any element $a+b\sqrt{d} \in \Q[\sqrt{d}]$, its inverse is $\frac{a}{a^2-db^2} - \frac{b}{a^2-db^2}\sqrt{d}$ since
        \begin{align*}
            &(a+b\sqrt{d})\left(\frac{a}{a^2-db^2} - \frac{b}{a^2-db^2}\sqrt{d}\right)\\
            &= \left(a\left(\frac{a}{a^2-db^2}\right) + b\left(-\frac{b}{a^2-db^2}\right)d\right) + \left(a\left(-\frac{b}{a^2-db^2}\right) + b\left(\frac{a}{a^2-db^2}\right)\right)\sqrt{d}\\
            &=\left(\frac{a^2}{a^2-db^2} -\frac{b^2d}{a^2-db^2}\right) + \left(-\frac{ab}{a^2-db^2} + \frac{ab}{a^2-db^2}\right)\sqrt{d}\\
            &=1.
        \end{align*}
    \end{itemize}

    Therefore $\Q[\sqrt{d}]$ is a field.
\end{proof}

As discussed in the previous section, there is a function, called the norm, that is of interest.
\begin{definition}
    The \textbf{norm}\index{quadratic integer!norm} of an element $a+b\sqrt{d} \in \Z[\sqrt{d}]$, where $d$ is a square-free integer not equal to 1, is given by the map $N: \Z[\sqrt{d}] \to \Z$ where
    \[
        N(a+b\sqrt{d}) = |a^2-db^2|.
    \]
\end{definition}
\begin{remark}
    Most texts prefer to define the norm \textit{without} the absolute value. However, as we will see later, defining it with the absolute value makes some properties easier to reason.
\end{remark}

\begin{proposition}\label{prop-properties-of-quadratic-integer-norm}
    Let $x,y \in \Z[\sqrt{d}]$, where $d$ is a square-free integer not equal to 1. Then
    \begin{enumerate}
        \item $x = 0$ if and only if $N(x) = 0$;
        \item $N(xy) = N(x)N(y)$ for all $x$ and $y$;
        \item $x$ is a unit if and only if $N(x) = 1$; and
        \item if $N(x) = p$ where $p$ is a prime number, then $x$ is irreducible.
    \end{enumerate}
\end{proposition}
\begin{proof}
    We prove the statements in order.
    \begin{enumerate}
        \item For the forward direction, note that if $x = 0$ then clearly $N(0) = 0^2 - d(0)^2 = 0$. For the reverse direction suppose $N(x) = a^2 - db^2 = 0$ where $a,b \in \Z$. Then $a^2 = db^2$ which means $a = \pm\sqrt{d}b$. Now since $d$ is a square-free integer, therefore the only way for equality on both sides (with the left hand side being an integer and the right being irrational) is for $a = b = 0$. Therefore $x = 0$.
        
        \item Let $x = p + q\sqrt{d}$ and $y = r + s\sqrt{d}$ where $p,q,r,s \in \Z$. Then
        \begin{align*}
            N(xy) &= N((p+q\sqrt{d})(r+s\sqrt{d}))\\
            &= N((pr + qsd) + (ps + qr)\sqrt{d})\\
            &= |(pr+qsd)^2 - d(ps+qr)^2|\\
            &= |((pr)^2 + 2(pqrsd) + (qsd)^2) - d((ps)^2 + 2(pqrs) + (qr)^2)|\\
            &= |p^2r^2 + 2pqrsd + q^2s^2d^2 - p^2s^2d - 2pqrsd - q^2r^2d|\\
            &= |p^2r^2 + q^2s^2d^2 - p^2s^2d - q^2r^2d|\\
            &= |p^2r^2 - p^2s^2d - q^2r^2d + q^2s^2d^2|\\
            &= |(p^2 - dq^2)(r^2 - ds^2)|\\
            &= |p^2 - dq^2||r^2 - ds^2|\\
            &= N(p+q\sqrt{d})N(r+s\sqrt{d})\\
            &= N(x)N(y).
        \end{align*}

        \item For the forward direction, if $x$ is a unit then there exists a $x^{-1}$ such that $xx^{-1} = 1$. Note $N(xx^{-1}) = N(x)N(x^{-1}) = N(1) = 1$. Therefore, since we are working in the integers, we see $N(x)$ and $N(x^{-1})$ are both 1.
        
        For the reverse direction, consider $x = p+q\sqrt{d}$ and $\bar{x} = p-q\sqrt{d}$. Note $x\bar{x} = p^2-dq^2 = N(x)$. Therefore if $N(x) = 1$ we see $x\bar{x} = 1$, meaning that $x$ is a unit.

        \item See \myref{exercise-quadratic-integer-irreducible-if-norm-is-prime} (later).
    \end{enumerate}
    This proves all properties of the norm.
\end{proof}

We are now ready to define the ring of quadratic integers.
\begin{definition}
    Let $d$ be a square-free integer not equal to 1. The \textbf{ring of quadratic integers}\index{quadratic integer!ring} is the set
    \[
        \Z[\sqrt{d}] = \{a + b\sqrt{d} \vert a,b\in\Z\}
    \]
    under the same operations of addition and multiplication as $\Q[\sqrt{d}]$.

    An element in $\Z[\sqrt{d}]$ is called a \textbf{quadratic integer}\index{quadratic integer}.
\end{definition}
\begin{proposition}
    For a square-free integer $d \neq 1$, $\Z[\sqrt{d}]$ is a subring of $\Q[\sqrt{d}]$. Furthermore $\Z[\sqrt{d}]$ is an integral domain.
\end{proposition}
\begin{proof}
    We first check that $(\Z[\sqrt{d}], +) \leq (\Q[\sqrt{d}], +)$.
    \begin{itemize}
        \item Clearly the identity of $\Q[\sqrt{d}]$, which is 0, is also in $\Z[\sqrt{d}]$.
        \item For any $a+bi, x+y\sqrt{d} \in \Z[\sqrt{d}]$ we note
        \[
            a + b\sqrt{d} + (-(x+y\sqrt{d})) = (a-x) + (b-y)\sqrt{d} \in \Z[\sqrt{d}].
        \]
    \end{itemize}
    Thus the subgroup test (\myref{thrm-subgroup-test}) tells us that $(\Z[\sqrt{d}], +) \leq (\Q[\sqrt{d}], +)$.

    Now one sees that for any $a+b\sqrt{d}, x+y\sqrt{d} \in \Z[\sqrt{d}]$ we have
    \[
        (a+b\sqrt{d})(x+y\sqrt{d}) = (ax+(by)d) + (ay+bx)\sqrt{d}
    \]
    which is also in $\Z[\sqrt{d}]$. Thus $\Z[\sqrt{d}]$ is closed under multiplication. Hence $\Z[\sqrt{d}]$ is a subring of $\Q[\sqrt{d}]$. Furthermore, since $\Q[\sqrt{d}]$ is a field, thus the multiplication is commutative, which means $\Z[\sqrt{d}]$ is a commutative subring.

    Now we show that $\Z[\sqrt{d}]$ is an integral domain. Suppose $uv = 0$ in $\Z[\sqrt{d}]$. Then
    \[
        N(u)N(v) = N(uv) = N(0) = 0.
    \]
    Since $\Z$ is an integral domain, thus this means that $N(u) = 0$ or $N(v) = 0$, which further means that $u = 0$ or $v = 0$ by properties of the norm (\myref{prop-properties-of-quadratic-integer-norm}). Therefore $\Z[\sqrt{d}]$ is an integral domain.
\end{proof}

\begin{exercise}\label{exercise-quadratic-integer-irreducible-if-norm-is-prime}
    Let $d$ be a square-free integer that is not 1. Prove that $x \in \Z[\sqrt{d}]$ is irreducible if $N(x) = p$, where $p$ is a prime number.
\end{exercise}

We look at more examples of irreducible elements in $\Z[\sqrt{d}]$.
\begin{example}
    We claim that 7 is irreducible in $\Z[\sqrt{5}]$. Suppose $7 = xy$ where neither $x$ nor $y$ is a unit. Then note
    \[
        N(x)N(y) = N(xy) = N(7) = 49.
    \]
    Since neither $x$ nor $y$ is a unit, we cannot have $N(x) = 1$, and also cannot have $N(y) = 1$. This leaves $N(x) = N(y) = 7$. 
    
    Now suppose $x = a + b\sqrt{5}$ where $a, b \in \Z$. We are to find a possible solution to $N(a+b\sqrt{5}) = |a^2 - 5b^2| = 7$, i.e. $a^2 - 5b^2 = \pm 7$. Reducing both sides of the equation modulo 5 we see $a^2 \equiv \pm7 \pmod5$, so $a^2 \equiv 2$ or $a^2 \equiv 3 \pmod5$. Note that, in modulo 5,
    \begin{itemize}
        \item if $a \equiv 0$ then $a^2 \equiv 0$;
        \item if $a \equiv 1$ then $a^2 \equiv 1$;
        \item if $a \equiv 2$ then $a^2 \equiv 4$;
        \item if $a \equiv 3$ then $a^2 \equiv 9 \equiv 4$; and
        \item if $a \equiv 4$ then $a^2 \equiv 16 \equiv 1$.
    \end{itemize}
    Therefore it is impossible to find a value for $a$ to achieve $a^2 - 5b^2 = \pm7$. Hence 7 is irreducible.
\end{example}

\begin{exercise}
    Recall that the Gaussian integers is the set $\Z[i] = \Z[\sqrt{-1}]$.
    \begin{partquestions}{\alph*}
        \item Show that the numbers 2 and 5, which are primes in the positive integers, are no longer primes in the Gaussian integers.
        \item \begin{partquestions}{\roman*}
            \item Show that, for any two integers $a$ and $b$, it is impossible to have $a^2 + b^2 \equiv 3 \pmod4$.
            \item Prove that 3 is irreducible in the Gaussian integers.
            \item Let $x \in \Z[i]$. Show that if $9 \vert N(x)$ then $3 \vert x$.\newline
            (\textit{Hint: you may need to consider all possibilities of squares modulo 9.})
            \item Prove that 3 is a prime in the Gaussian integers, which is called a \textbf{Gaussian prime}\index{Gaussian prime}.
        \end{partquestions}
    \end{partquestions}
\end{exercise}

\section{Unique Factorization Domains (UFDs)}
We now have the necessary terminology to formalize the idea of a unique factorization domain. Concisely, in a unique factorization domain $D$, for every non-zero non-unit element $x$ in $D$,
\begin{enumerate}
    \item $x$ can be written as a product of irreducibles of $D$; and
    \item the factorization into irreducibles is unique up to associates and the order in which the factors appear.
\end{enumerate}

We formalize these conditions in the definition of a unique factorization domain.

\begin{definition}
    An integral domain $D$ is a \textbf{unique factorization domain}\index{unique factorization domain} or \textbf{UFD}\index{UFD} if, for every non-zero non-unit $x \in D$, there exists (not necessarily unique) irreducible elements $p_1, p_2, \dots, p_n \in D$ such that
    \[
        x = p_1p_2p_3\cdots p_n
    \]
    where $n$ is a positive integer, and if we also have (not necessarily unique) irreducible elements $q_1, q_2, \dots, q_m \in D$ such that
    \[
        x = q_1q_2q_3\cdots q_m
    \]
    where $m$ is a positive integer, then $m = n$ and there exists a bijection $\sigma: \{1,2,\dots,n\} \to \{1,2,\dots,m\}$ such that $p_i$ and $q_{\sigma(i)}$ are associates for all $i \in \{1,2,\dots,n\}$.
\end{definition}

Of course, UFDs are very abstract in this sense. However, we shall soon see that most of the integral domains that we are familiar with are, in fact, UFDs. Before that though, we need to introduce the ascending chain condition.

\begin{definition}
    Let $R$ be a ring. The \textbf{ascending chain condition on principal ideals (ACCP)}\index{ascending chain condition on principal ideals}\index{ACCP} is satisfied if every strictly increasing sequence of principal ideals 
    \[
        I_1 \subset I_2 \subset I_3 \subset \cdots
    \]
    is finite in length.
\end{definition}

\begin{lemma}\label{lemma-pid-satisfies-accp}
    Any PID satisfies the ACCP.
\end{lemma}
\begin{proof}
    Let $I_1 \subset I_2 \subset \cdots$ be a chain of strictly increasing ideals in a PID $D$. Let
    \[
        I = \bigcup_{i=1} I_k
    \]
    be the union of all the ideals in this chain. We show that $I$ is indeed an ideal. First, let $a,b\in I$ and $r \in D$. Then $a \in I_i$ and $b \in I_j$ for some $i$ and $j$. Set $k$ to be the larger of $i$ and $k$. Since we have a strict inclusion in the chain, we must have $a \in I_k$ and $b \in I_k$. Thus, since $I_k$ is an ideal, $a - b \in I_k \subseteq I$ and $ra, ar \in I_k \subseteq I$. Therefore $I$ is an ideal by test for ideal (\myref{thrm-test-for-ideal}).

    Now, since $D$ is a PID, there is an element $a \in D$ such that $I = \princ{a}$. Since $a \in I$ and $I$ is, by definition, the union of all ideals in the chain, $a$ must belong to some member in the chain, say $a \in I_n$. Clearly for any member $I_i$ in the chain we have $I_i \subseteq I$, and $I = \princ{a} \subseteq I_n$. Therefore every ideal in the chain is a subset of $I_n$, which means $I_n$ is the last member of the chain. Therefore the chain is finite.
\end{proof}

We are now ready to state an important theorem, with very useful corollaries.

\begin{theorem}\label{thrm-PID-is-UFD}
    Every PID is a UFD.
\end{theorem}
\begin{proofsketch}
    We need to show two parts. First is to show existence; the second uniqueness.

    To show the existence, we first show that every non-zero non-unit element in a PID has at least one irreducible factor; thereafter, using repeated factorization, show that we can express each non-irreducible factor as a product of irreducible factors. This would be enough to show that any element has a factorization into irreducible factors.

    We then show uniqueness, which we will do via induction. We suppose that there are two factorizations of a non-zero non-unit element. The base case of 1 irreducible factor is trivial. The induction step involves observing that a prime must divide an element in a product; doing so would allow us to conclude that at least one pair of irreducible factors that are associates with each other. This would be enough for us to `cancel out' that factor on both factorizations, and use the induction hypothesis to finish the proof.
\end{proofsketch}
\begin{proof}[Proof (see {\cite[pp.~313-314]{gallian_2016}})]
    Suppose $D$ is a PID and $a_0 \in D$ be a non-zero non-unit element. We first show that there exists a product of irreducibles (which may consist of only one factor) that results in $a_0$. We might as well assume $a_0$ is reducible, since if $a_0$ is irreducible we are done ($a_0$ is a product of irreducibles, which is itself). So let $a_0 = b_1a_1$ where neither $b_1$ nor $a_1$ are units and $a_1 \neq 0$. Again, if $a_1$ is irreducible we are done with this process (where $a_0 = b_0a_1$); otherwise write $a_1 = b_2a_2$ where neither $b_2$ nor $a_2$ are units and $a_2 \neq 0$. Continuing in this fashion, we get a sequence $b_1,b_2,\dots$ of non-unit elements in $D$ and a sequence $a_0,a_1,a_2,\dots$ of non-zero elements in $D$ with $a_n = b_{n+1}a_{n+1}$ for each $n$. Hence,
    \[
        \princ{a_0} \subset \princ{a_1} \subset \princ{a_2} \subset \cdots
    \]
    is a strictly increasing chain of ideals by \myref{exercise-princ-ab-subset-of-b-iff-a-not-unit} (later). Using \myref{lemma-pid-satisfies-accp} we know that the above chain is finite, say
    \[
        \princ{a_0} \subset \princ{a_1} \subset \princ{a_2} \subset \princ{a_r}.
    \]
    In particular, by our construction, we know that $a_r$ is an irreducible factor of $a_0$, which means every non-zero non-unit element of $D$ has at least one irreducible factor.

    Now we write $a_0 = p_1c_1$ where $p_1$ is irreducible and $c_1$ is a non-unit. Like before, if $c_1$ is not irreducible, write $c_1 = p_2c_2$, where $p_2$ is irreducible and $c_2$ is not a unit. Continuing like this we obtain another strictly increasing chain
    \[
        \princ{a_0} \subset \princ{c_1} \subset \princ{c_2} \subset \cdots
    \]
    which terminates (\myref{lemma-pid-satisfies-accp}), say at $\princ{c_s}$. This means $c_s$ is irreducible by our construction, and so we have
    \[
        a_0 = p_1p_2\cdots p_sc_s,
    \]
    where we note that each $p_i$ is also irreducible. Therefore every non-zero non-unit of a PID is a product of irreducibles.

    We now show the uniqueness of such a factorization, up to associates and the reordering of terms. We first suppose that some non-zero non-unit element of $D$, say $a$, can be written
    \[
        a = p_1p_2p_3\cdots p_n = q_1q_2 \cdots q_m
    \]
    where each $p_i$ and $q_j$ are irreducible. We induct on $n$.

    When $n = 1$, we have $a = p_1$, which means $a$ is irreducible. So $a = q_1$ (since otherwise $a$ would be a product of more than one irreducible factor, meaning $a$ is irreducible), which therefore results in $m = n = 1$ and $p_1 = q_1$. Therefore the base case is proven.

    Assume that we obtain uniqueness (up to associates and reordering) for any $k$ irreducible factors in the expression involving $p$, where $k$ is a positive integer. That is, if $a = q_1q_2 \cdots q_m$ then $m = k$ and $p_1p_2\cdots p_k = q_1q_2 \cdots q_m$. We show that uniqueness is also attained for $k + 1$ irreducible factors in the expression in $p$, i.e. if $a = p_1p_2\cdots p_kp_{k+1}$ and $a = q_1q_2 \cdots q_m$, then $m = k+1$ and $p_1p_2\cdots p_kp_{k+1} = q_1q_2 \cdots q_m$.

    Since $D$ is a PID, every irreducible in $D$ is prime (\myref{thrm-in-PID-prime-iff-irreducible}). In particular, every $p_i$ in the product $p_1p_2\cdots p_kp_{k+1}$ is prime. Since $p_1p_2\cdots p_kp_{k+1} = q_1\cdots q_m$, therefore $p_1$ divides $q_1\cdots q_m$, which therefore means that $p_1$ divides some $q_j$ in the product (see \myref{problem-prime-element-divides-some-element-in-product} later). Say $p_1 \vert q_1$ (which is permitted since $D$ is commutative). Then since $q_1$ is irreducible, we must have $q_1 = up_1$ where $u$ is some unit of $D$. Now since
    \begin{align*}
        (up_1)p_2p_3\cdots p_kp_{k+1} &= u\left(p_1p_2p_3\cdots p_kp_{k+1}\right)\\
        &= u\left(q_1q_2q_3\cdots q_m\right)\\
        &= q_1(uq_2)q_3\cdots q_m
    \end{align*}
    and because $q_1 = up_1$, we have
    \[
        p_2p_3\cdots p_kp_{k+1} = (uq_2)q_3\cdots q_m
    \]
    by cancellation law (\myref{prop-domain-cancellation-law}). Since associates of an irreducible are irreducible (\myref{prop-associates-of-irreducible-is-irreducible}), we might as well write $uq_2$ as $Q$, which is an irreducible, meaning
    \[
        p_2p_3\cdots p_kp_{k+1} = Qq_3\cdots q_m.
    \]
    By induction hypothesis, we know that these two factorizations are unique up to associates and rearrangements. Therefore, the same is true for that of $a = p_1p_2\cdots p_kp_{k+1}$.

    Hence, by induction, the factorization is unique, completing the proof.
\end{proof}

\begin{exercise}\label{exercise-princ-ab-subset-of-b-iff-a-not-unit}
    Let $D$ be an integral domain, $a,b\in D$, and $b \neq 0$. Prove that $\princ{ab} \subset \princ{b}$ if and only if $a$ is not a unit.\newline
    (\textit{Hint: consider contrapositives.})
\end{exercise}

We observe one immediate corollary, which is incredibly useful.

\begin{corollary}
    Let $F$ be a field. Then $F[x]$ is a UFD.
\end{corollary}
\begin{proof}
    We know that $F[x]$ is a PID (\myref{thrm-polynomial-ring-over-field-is-a-PID}). Therefore $F[x]$ is a UFD by \myref{thrm-PID-is-UFD}.
\end{proof}

\begin{example}
    We know factorization of polynomials in the rationals is unique, since $\Q$ is a field which therefore means $\Q[x]$ is a UFD.
\end{example}
\begin{example}
    The same is true for factorization in $\R[x]$ and $\C[x]$ as both of them are UFDs.
\end{example}

The trouble comes with the ring of polynomials with integer coefficients, $\Z[x]$. We showed earlier that $\Z[x]$ is \textit{not} a PID (\myref{problem-Z[x]-is-not-a-PID}), so we cannot directly use \myref{thrm-PID-is-UFD} to conclude that $\Z[x]$ is a UFD. Does this mean that factorization over polynomials with integer coefficients is not unique? No! In fact, $\Z[x]$ is a counterexample for the converse of \myref{thrm-PID-is-UFD}, showing that a UFD need not be a PID.

\begin{theorem}
    $\Z[x]$ is a UFD.
\end{theorem}
\begin{proofsketch}
    Just like in \myref{thrm-PID-is-UFD}, we need to show two parts: existence and uniqueness.

    For existence, we first show that the problem for any general non-zero non-unit polynomial can be reduced to showing the existence of a factorization for non-constant primitive polynomials. We then use strong induction to prove that a factorization into irreducible polynomials is possible for any degree.

    For uniqueness it is more challenging, since we have to worry about irreducibility via factoring out non-unit constants. We first show that if two factorizations are achieved, and if the content of both factorizations is `taken out', then they are equal to each other, up to a possible negative sign. Therefore, they can be cancelled, leaving us with the problem of showing uniqueness of factorization of a product of irreducible primitive polynomials.

    The trick is to view each one of these polynomials as an element of $\Q[x]$, which is a field. We can then invoke theorems in such a field (specifically, that irreducibles are primes) to show that the `leading' factors of both factorizations are associates. Cancellation of that factor on both sides leaves a `simpler' problem; the cancellation argument also shows that there must be an equal number of factors on each side, and the factors are associates of each other, thereby showing that such a factorization is unique.
\end{proofsketch}
\begin{proof}[Proof (see {\cite[pp.~297-298]{gallian_2016}})]
    We first prove the existence of a factorization into irreducible polynomials. Suppose $f(x)$ is a non-zero non-unit polynomial in $\Z[x]$. If $f(x)$ is a constant polynomial we are done since the result follows from the Fundamental Theorem of Arithmetic (\myref{thrm-fundamental-theorem-of-arithmetic}). So let $\deg f(x) > 0$, and let $C_f$ denote the content of $f(x)$. By the Fundamental Theorem of Arithmetic we may factor $C_f$ as a product of primes (which are irreducible, \myref{thrm-in-integral-domain-primes-are-irreducibles}), say $C_f = p_1p_2\cdots p_s$. Then write
    \[
        f(x) = p_1p_2\cdots p_s F(x)
    \]
    where one sees that $F(x) \in \Z[x]$, $\deg F(x) = \deg f(x)$, and $F(x)$ is primitive. So, to prove the existence of a factorization of non-constant polynomials in $\Z[x]$ into irreducible polynomials, it suffices to show that non-constant primitive polynomials factor into irreducible polynomials. To do this, we proceed by strong induction on the degree of $F(x)$.

    If $\deg F(x) = 1$, then $F(x)$ is irreducible since it is a degree 1 primitive polynomial (\myref{problem-primitive-degree-1-polynomial-in-Z[x]-is-irreducible}). Therefore, trivially, $F(x)$ can be factored into itself, so this case is proven.

    Now suppose that for all polynomials lower than a certain degree, say $k$, that we have a factorization into irreducible polynomials. We show that a polynomial of degree $k+1$ can also be factored into irreducible polynomials.

    If $F(x)$, a primitive degree $k+1$ polynomial, is irreducible, we are done. Otherwise, it is reducible, meaning we may write $F(x) = g(x)h(x)$ where $g(x)$ and $h(x)$ are non-unit polynomials. We note that if $g(x)$ nor $h(x)$ are non-primitive polynomials, then the content of $F(x)$ is not 1 i.e., $F(x)$ is not primitive, a contradiction. So $g(x)$ and $h(x)$ are both primitive polynomials of degree lower than $k+1$, i.e. both are polynomials of degree of at most $k$. We use the induction hypothesis to factor $g(x)$ and $h(x)$ into irreducible polynomials, thereby showing $F(x)$ can be factored into irreducible polynomials. Therefore, a degree $k+1$ polynomial can also be factored into irreducible polynomials.

    Hence, by induction, we have shown the existence of a factorization into irreducible polynomials for any (primitive) polynomial.

    We now show the uniqueness of such a factorization, and we return to using $f(x)$, which may not be primitive. Suppose
    \[
        f(x) = p_1p_2\cdots p_s g_1(x)g_2(x) \cdots g_m(x)
    \]
    and
    \[
        f(x) = q_1q_2\cdots q_t h_1(x)h_2(x) \cdots h_n(x)
    \]
    are two factorizations of $f(x)$, where $p_1, p_2, \dots, p_s, q_1, q_2, \dots, q_t$ are irreducible polynomials of degree 0 (i.e., prime numbers) and $g_1(x), g_2(x), \dots, g_m(x), h_1(x), h_2(x), \dots, h_n(x)$ are non-constant primitive irreducible polynomials. Let
    \begin{align*}
        P &= p_1p_2\cdots p_s,\\
        Q &= q_1q_2\cdots q_t.
    \end{align*}
    Since each $g_i(x)$ and each $h_j(x)$ are primitive, it follows from Gauss's Lemma (\myref{lemma-gauss}) that their product, $g_1(x)g_2(x) \cdots g_m(x)$ and $h_1(x)h_2(x) \cdots h_n(x)$ respectively, are both primitive. So $P$ and $Q$ must be equal to plus or minus the content of $f(x)$; thus $P$ and $Q$ are equal in absolute value. It follows from the Fundamental Theorem of Arithmetic that $s = t$ and, after renumbering, $p_i = \pm q_i$ for all $i \in \{1, 2, \dots, s\}$. So we may cancel these constant terms in the factorization of $f(x)$, leaving us with
    \[
        g_1(x)g_2(x) \cdots g_m(x) = \pm h_1(x)h_2(x) \cdots h_n(x).
    \]
    
    Now we view each $g_i(x)$ and $q_j(x)$ as elements of $\Q[x]$. We note $\Q[x]$ is a PID since $\Q$ is a field (\myref{thrm-polynomial-ring-over-field-is-a-PID}), so each $g_i(x)$ and $q_j(x)$, which are irreducibles, are prime in $\Q[x]$ (\myref{thrm-in-PID-prime-iff-irreducible}). Since $p_1(x) \vert h_1(x)h_2(x) \cdots h_n(x)$, it follows from \myref{problem-prime-element-divides-some-element-in-product} (later) that $p_1(x) \vert h_j(x)$ for some $j \in \{1, 2, \dots, n\}$. We might as well assume $p_1(x) \vert h_1(x)$, since $Q[x]$ is an integral domain which means that we can commute the factors on the right hand side. As $h_1(x)$ is irreducible, for $p_1(x)$ to divide $h_1(x)$ we must have $h_1(x) = up(x)$, where $u$ is a unit in $\Q$. But both $g_1(x)$ and $h_1(x)$ are primitive, so $u = \pm 1$, which means $g_1(x) = \pm h_1(x)$. Therefore, by cancellation, we see
    \[
        g_2(x) \cdots g_m(x) = \pm h_2(x) \cdots h_n(x).
    \]
    We may now repeat the argument with $p_2(x)$ in place of $p_1(x)$, and so on.

    We note that
    \begin{itemize}
        \item if $m < n$, then after $m$ steps we would get $\pm 1$ on the left hand side and a non-constant polynomial on the right hand side, which is impossible; and
        \item if $m > n$, then after $n$ steps we would get a  non-constant polynomial on the left hand side and $\pm1$ on the right hand side, which is also impossible.
    \end{itemize}
    Therefore, $m = n$, and $p_i(x) = \pm q_i(x)$ after suitable rearrangement. Since the only units in $\Z$ are 1 and -1, we see that any $p_i(x)$ and $q_i(x)$ are associates, which means that the factorization is unique.

    Hence, we have shown that $\Z[x]$ is a UFD.
\end{proof}

Clearly, proving that an integral domain is a UFD is a tedious ordeal. Hence, we would usually show that an integral domain is a `simpler' type of domain, such as a PID, to indirectly show that it is a UFD.

\begin{exercise}
    Prove the Fundamental Theorem of Arithmetic (\myref{thrm-fundamental-theorem-of-arithmetic}).\newline
    (\textit{Hint: What type of domain is $\Z$?})
\end{exercise}

\section{Euclidean Domains (EDs)}
% TODO: Add

\section{Summary of Domains}
% TODO: Add
% See https://www.math3ma.com/blog/the-integral-domain-hierarchy-part-1

\newpage

\section{Problems}
\begin{problem}\label{problem-prime-element-divides-some-element-in-product}
    Let $D$ be an integral domain and $p$ a prime in $D$. Suppose $a_1, a_2, a_3, \dots, a_n$ are elements in $D$ such that $p \vert a_1a_2a_3\dots a_n$, where $n \geq 2$. Prove that $p \vert a_i$ for some $i \in \{1, 2, \dots, n\}$.
\end{problem}
% TODO: Add

% TODO: Add Sicherman Dice