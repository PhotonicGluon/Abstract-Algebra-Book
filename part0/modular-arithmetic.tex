\chapter{Modular Arithmetic}
One may think of modular arithmetic as a number system where numbers \textit{wrap around} after reaching a certain value. We state useful properties and results from this field here.

\section{Modulo and Modular Congruence}
\begin{definition}
    Given an integer $n>1$, called a \textbf{modulus}\index{modulus}, two integers $a$ and $b$ are said to be \textbf{congruent modulo $n$}\index{congruence} if $n$ is a divisor of $a - b$. It is denoted $a \equiv b \pmod{n}$.
\end{definition}
\begin{remark}
    Equivalently, $a \equiv b \pmod n$ means that $a = kn + b$ for some integer $k$.
\end{remark}
\begin{remark}
    The parentheses mean that ``$\pmod{n}$'' applies to the entire equation, not just to the right-hand side (here, $b$). This notation is not to be confused with the notation ``$b \mod n$'' (without parentheses), which refers to the modulo operation that returns the remainder upon division by $n$.
\end{remark}
\begin{example}
    We see that $38 \equiv 14 \pmod{12}$ since $38 - 14 = 24 = 2 \times 12$. Another way to express this is to say that both 38 and 14 have the same remainder (i.e., 2) when divided by 12.
\end{example}

\begin{exercise}
    Let $m = 5$ and $n = 3$.
    \begin{partquestions}{\alph*}
        \item State the value of $17 \mod m$.
        \item Find an $x$ where $0 \leq x < m$ and $19 \equiv x \pmod m$.
        \item If $A = 1234n + 5$, what is $A \mod n$?
    \end{partquestions}
\end{exercise}

The definition of congruence also applies to negative values.
\begin{example}
    $-3 \equiv 2 \pmod5$ since $-3 = -1\times5 + 2$.
\end{example}
\begin{example}
    $-8 \equiv 7 \pmod5$ since $-8 = -3\times5 + 7$. Furthermore, $7 \equiv 2 \pmod5$ since $7 = 1\times5 + 2$.
\end{example}
\begin{example}
    $-1 \equiv n-1 \pmod{n}$ since $-1 = 1\times n + (n-1)$.
\end{example}

\begin{exercise}
    Explain why $-n \equiv n \pmod{2n}$.
\end{exercise}

The operation of congruence modulo $n$ has a few properties\index{congruence!properties} which we state without proof. Let $k$ be an integer, $a \equiv b \pmod n$, $a_1 \equiv b_1 \pmod n$ and $a_2 \equiv b_2 \pmod n$. Then
\begin{itemize}
    \item $a + k \equiv b + k \pmod n$;
    \item if $a+k \equiv b+k \pmod n$ then $a \equiv b \pmod n$;
    \item $ka \equiv kb \pmod n$;
    \item $ka \equiv kb \pmod {kn}$;
    \item $a_1 \pm a_2 \equiv b_1 \pm b_2 \pmod n$;
    \item $a_1a_2 \equiv b_1b_2 \pmod n$;
    \item $a^k \equiv b^k \pmod n$ if $k \geq 0$;
    \item if $ka \equiv kb \pmod n$ and $\gcd(k, n) = 1$, then $a \equiv b \pmod n$; and
    \item if $ka \equiv kb \pmod{kn}$ where $k \neq 0$ then $a \equiv b \pmod n$.
\end{itemize}

\begin{exercise}
    Find the last two digits of $778899^{112233}$.
\end{exercise}

\section{Modular Multiplicative Inverse}
\begin{definition}
    Let $m$ be a positive integer, and let $a$ be an integer. An integer $x$ such that $ax \equiv 1 \pmod m$ is said to be the \textbf{multiplicative inverse of $a$ modulo $m$}\index{multiplicative inverse modulo $n$}.
\end{definition}
\begin{example}
    4 is the multiplicative inverse of 7 modulo 9 since $4 \times 7 = 28 = 3 \times 9 + 1 \equiv 1 \pmod 9$.
\end{example}

\begin{proposition}\label{prop-multiplicative-inverse-exists-iff-coprime}
    $a$ has a multiplicative inverse modulo $m$ if and only if $\gcd(a,m) = 1$.
    % A multiplicative inverse of $a$ modulo $m$ exists if and only if $\gcd(a,m) = 1$.
\end{proposition}
\begin{proof}
    We first work forwards and suppose $k$ is the multiplicative inverse of $a$ modulo $m$. Then $ka \equiv 1 \pmod m$. Hence $ka - 1 \equiv 0 \pmod m$, so $m$ divides $ka - 1$. This means that $ka - 1$ is a multiple of $m$, so $ka - 1 = pm$ for some integer $p$. Therefore $ka + pm = 1$ By B\'{e}zout's Lemma (\myref{lemma-bezout}) this means that $\gcd(a, m) = 1$.
    
    Now, working in the reverse direction, suppose $\gcd(a, m) = 1$. B\'{e}zout's Lemma tells us that integers $k$ and $p$ exist such that $ka + pm = 1$, meaning $ka - 1 = pm$. So $m$ divides $ka - 1$, meaning $ka - 1 \equiv 0 \pmod m$ which the result quickly yields.
\end{proof}

\begin{example}
    The number 20 has a multiplicative inverse modulo 31 since $\gcd(20, 31) = 1$. One can verify that 14 is the multiplicative inverse of 20 modulo 31.
\end{example}

\begin{exercise}
    Find the modular multiplicative inverse of 123 modulo 5.
\end{exercise}
